% 5. Prototyp (Implementierung, Patterns, Tests)
\chapter{Implementing the Modular Proxy Application}
\label{chap:implementation}
This chapter covers an exemplaric implementation of the concept that was worked out in chapter \ref{chap:conceptual-design}, starting with formally describing the goals and constraints of this implementation in section \ref{sec:goals-constraints}. Afterwards, an overview and comparison of available and suitable tools for the task is performed in section \ref{sec:tool-selection}. The chapter concludes with details about the implementation of individual components in section \ref{sec:individual-components}, describing how specific challenges were overcome and what design patterns were used.

\section{Goals and Constraints}
\label{sec:goals-constraints}
\emph{TBD} %TODO: Write out
\begin{itemize}
    \item \emph{Focus on complex scenario \#2: HTTP, WS, MQTT}
    \item \emph{No interactive mode}
    \item \emph{Fully implement factories, state-machines and netstacks as POC}
\end{itemize}

\section{Tool Selection}
\label{sec:tool-selection}

\subsection{Requirements to The Tools}
\emph{TBD} %TODO: Write out
\begin{itemize}
    \item \emph{Needs to run cross-platform}
    \item \emph{Low-level access to APIs}
    \item \emph{Rich set of low-level libraries for protocol implementations}
    \item \emph{Accessible and easily extendable}
\end{itemize}

\subsection{Comparison of Programming Languages, Frameworks and Libraries}
\emph{TBD: Discuss how the candidates match the above-mentioned criteria and point out why python was chosen} %TODO: Write out
\begin{itemize}
    \item \emph{Native C: Win32 API / Linux ABI}
    \item \emph{.NET Visual C\# \& NuGet}
    \item \emph{JavaScript/TypeScript \& npm}
    \item \emph{Python \& pip}
\end{itemize}

\section{Individual Components}
\label{sec:individual-components}

\subsection{Network Stack}
\subsubsection{Gateways}
\subsubsection{Pipes, Encoders and Processors}
\subsubsection{Scripting}
\subsubsection{Pipelines}

\subsection{Finite State Machine}
\subsubsection{States}
\subsubsection{Transitions}
\subsubsection{Nested \acp{FSM}}

\subsection{Configuration Parsing and Building}
\subsubsection{Factories, Builders and Templates}